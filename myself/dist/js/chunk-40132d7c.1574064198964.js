(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40132d7c"],{"1ee8":function(e,t,i){"use strict";var r=i("d3c9"),n=i.n(r);n.a},"2cae":function(e,t,i){},"2ee6":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"assemble-container"},[i("user-action",{on:{createClick:e.createClick}}),e._v(" "),i("user-list",{attrs:{"table-data":e.list},on:{resetPass:e.resetPass,resetProhibit:e.resetProhibit}}),e._v(" "),i("user-dialog",{ref:"userDialog",attrs:{userDialogVisible:e.userDialogVisible,info:e.userInfo},on:{"update:userDialogVisible":function(t){e.userDialogVisible=t},"update:user-dialog-visible":function(t){e.userDialogVisible=t},comfirm:e.comfirm}})],1)},n=[],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"coupon-list-table"},[i("el-table",{ref:"multipleTable",attrs:{stripe:"",data:e.tableData}},[i("el-table-column",{attrs:{prop:"reName",label:"员工姓名","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"username",label:"帐号","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"cardId",label:"员工工号","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"",label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(i){return e.$emit("resetPass",t.row)}}},[e._v("重置密码")]),e._v(" "),i("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(i){return e.$emit("resetProhibit",t.row)}}},[e._v("禁用")])]}}])})],1)],1)},a=[],o={props:{tableData:{type:Array,required:!0}}},l=o,c=(i("305d"),i("2877")),u=Object(c["a"])(l,s,a,!1,null,"7c4ab68d",null),f=u.exports,d=i("ee0f"),m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"user-dialog",attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.close("userInfoForm")}}},[i("el-form",{ref:"userInfoForm",attrs:{model:e.info,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"员工姓名",prop:"reName"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.info.reName,callback:function(t){e.$set(e.info,"reName",t)},expression:"info.reName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"员工账号",prop:"username"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.info.username,callback:function(t){e.$set(e.info,"username",t)},expression:"info.username"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{autocomplete:"off",type:"password"},model:{value:e.info.password,callback:function(t){e.$set(e.info,"password",t)},expression:"info.password"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"员工编号",prop:"cardId"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.info.cardId,callback:function(t){e.$set(e.info,"cardId",t)},expression:"info.cardId"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.cancle("userInfoForm")}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm("userInfoForm")}}},[e._v("确 定")])],1)],1)},p=[],b={props:{info:{type:Object,required:!0},userDialogVisible:{type:Boolean,required:!0}},watch:{userDialogVisible:function(e){var t=this;this.dialogFormVisible=e,this.$nextTick((function(){t.$refs.userInfoForm.clearValidate()}))}},data:function(){return{dialogFormVisible:!1,title:"新增管理员",rules:{reName:[{required:!0,message:"请输入员工姓名",trigger:"blur"}],username:[{required:!0,message:"请输入员工账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],cardId:[{required:!0,message:"请输入员工编号",trigger:"blur"}]}}},methods:{close:function(e){this.$refs[e].clearValidate(),this.$emit("update:userDialogVisible",!1)},cancle:function(e){this.$refs[e].resetFields(),this.$emit("update:userDialogVisible",!1),this.$emit("cancle")},comfirm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$emit("comfirm",t.info)}))}}},g=b,h=(i("b871"),Object(c["a"])(g,m,p,!1,null,null,null)),v=h.exports,$=i("b775");function _(e){return Object($["a"])({url:"/api/adminUser/findAll",method:"get"})}function w(e){return Object($["a"])({url:"/api/adminUser/insertUser",method:"post",params:e})}var k={components:{userList:f,userAction:d["default"],userDialog:v},data:function(){return{userDialogVisible:!1,loading:!1,list:[],userInfo:{reName:"",username:"",password:"",cardId:""}}},created:function(){this.fetchCouponList()},methods:{fetchCouponList:function(){var e=this;this.loading=!0,_().then((function(t){e.loading=!1,e.list=t.result})).catch((function(t){e.loading=!1,e.$message.error(t.message)}))},resetPass:function(e){var t=this,i=e.username,r=e.id;this.$confirm("确认重置【 ".concat(i," 】的密码吗？")).then((function(e){t.loading=!0,w({username:i,password:123456,id:r}).then((function(e){t.loading=!1,t.$message.success("重置成功！")})).catch((function(e){t.loading=!1,t.$message.error(e.message)}))})).catch((function(e){}))},resetProhibit:function(e){var t=this,i=e.username,r=e.id;this.$confirm("确认禁用【 ".concat(i," 】的账户吗？")).then((function(e){t.loading=!0,w({status:0,id:r}).then((function(e){t.loading=!1,t.$message.success("禁用成功！")})).catch((function(e){t.loading=!1,t.$message.error(e.message)}))})).catch((function(e){}))},createClick:function(){this.userDialogVisible=!0},comfirm:function(){var e=this;this.$confirm("确认提交吗？").then((function(t){e.insertUser()})).catch((function(e){}))},insertUser:function(){var e=this;this.loading=!1,w(this.userInfo).then((function(t){e.loading=!1,e.$message.success("新增成功！"),e.userDialogVisible=!1,e.fetchCouponList()})).catch((function(t){e.loading=!1,e.$message.error(t.message)}))}}},V=k,D=(i("9f5d"),Object(c["a"])(V,r,n,!1,null,"37bca43f",null));t["default"]=D.exports},"305d":function(e,t,i){"use strict";var r=i("8afe"),n=i.n(r);n.a},8042:function(e,t,i){"use strict";var r=i("b006"),n=i.n(r);t["default"]=n.a},"8afe":function(e,t,i){},"9d18":function(e,t,i){},"9f5d":function(e,t,i){"use strict";var r=i("9d18"),n=i.n(r);n.a},b006:function(e,t){},b871:function(e,t,i){"use strict";var r=i("2cae"),n=i.n(r);n.a},ca4e:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"coupon-list-action"},[i("el-row",[i("el-button",{staticClass:"right mr15",attrs:{type:"primary"},on:{click:function(t){return e.$emit("createClick")}}},[e._v("新增")])],1)],1)},n=[];i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return n}))},d3c9:function(e,t,i){},ee0f:function(e,t,i){"use strict";var r=i("ca4e"),n=i("8042"),s=(i("1ee8"),i("2877")),a=Object(s["a"])(n["default"],r["a"],r["b"],!1,null,"80208000",null);t["default"]=a.exports}}]);