(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c4cdc3e0"],{"1991f":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"assemble-create-wrapper"},[i("template-add",{ref:"assemleInfoForm",attrs:{load:t.loading,info:t.info},on:{"update:load":function(e){t.loading=e},"update:info":function(e){t.info=e}}}),t._v(" "),i("template-btn",{on:{submit:t.submit}})],1)},o=[],s=(i("28a5"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{staticClass:"box-card action-add-info"},[i("el-form",{ref:"ruleForm",attrs:{model:t.info,"label-width":"150px"}},[i("el-form-item",{staticClass:"form-desc-item",staticStyle:{width:"600px"},attrs:{label:"公告文案："}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入公告文案",autosize:{minRows:6,maxRows:40}},model:{value:t.info.blogTxt,callback:function(e){t.$set(t.info,"blogTxt",e)},expression:"info.blogTxt"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"轮播图：",prop:"shareImage"}},[t.info?i("uploadimg-more",{attrs:{bundle:t.info},on:{"update:bundle":function(e){t.info=e},loading:t.loading}}):t._e(),t._v(" "),i("span",{staticStyle:{color:"#909399","font-size":"12px"}},[t._v("仅支持JPG/PNG格式，图片要求小于等于2MB")])],1)],1)],1)}),a=[],l=(i("ac6a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[t.bundle.bigPicsList?i("el-upload",{class:{hideUpload:1==t.bundle.bigPicsList.length},attrs:{action:t.uploadUrl(),"list-type":"picture-card",limit:1,"file-list":t.bundle.bigPicsList,"on-remove":t.handleRemove,"on-success":t.bigFileSuccess,"before-upload":t.beforeAvatarUpload}},[i("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]):t._e()],1)}),r=[],c={props:{bundle:{type:Object,required:!0}},methods:{bigFileSuccess:function(t,e){var i=this;this.bundle.bigPicsList.push({url:t.result}),setTimeout((function(){i.$emit("loading",!1)}),600)},uploadUrl:function(){return"/api/upload/file"},handleRemove:function(t){this.bundle.bigPicsList=this.bundle.bigPicsList.filter((function(e){return e.url!=t.url}))},beforeAvatarUpload:function(t){this.$emit("loading",!0);var e=t.type.toLowerCase(),i=/^image\/(jpg|png|jpeg)$/.test(e),n=t.size/1024/1024<2;return i||(this.$emit("loading",!1),this.$message.error("上传图片仅支持JPG/PNG格式")),n||(this.$emit("loading",!1),this.$message.error("上传图片大小不能超过 2MB!")),i&&n}}},u=c,d=(i("293d"),i("2877")),f=Object(d["a"])(u,l,r,!1,null,null,null),m=f.exports,p={props:{info:{type:Object,required:!0},load:{type:Boolean,required:!0}},components:{uploadimgMore:m},watch:{"info.bigPicsList":{handler:function(t){var e=this;this.info.bigPics="",t.forEach((function(t){e.info.bigPics+=t.url+","})),this.info.bigPics=this.info.bigPics.substring(0,this.info.bigPics.length-1)},immediate:!0,deep:!0}},methods:{loading:function(t){this.$emit("update:load",t)}}},g=p,h=(i("441e"),Object(d["a"])(g,s,a,!1,null,"af3c56d2",null)),b=h.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"action-btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$emit("submit")}}},[t._v("保存")])],1)},P=[],$={data:function(){return{routerPath:""}},mounted:function(){this.routerPath=window.location.href.split("#")[1]},methods:{}},w=$,x=(i("2217"),Object(d["a"])(w,v,P,!1,null,"1ddd4fa0",null)),_=x.exports,j=i("b775");function y(){return Object(j["a"])({url:"/homePage/init",method:"get"})}function L(t){return Object(j["a"])({url:"/homePage/updateHomePage",method:"get",params:t})}var O={components:{templateAdd:b,templateBtn:_},data:function(){return{loading:!0,info:{id:"",blogTxt:"",bigPics:"",bigPicsList:[]},routerPath:""}},mounted:function(){this.routerPath=window.location.href.split("#"),this.infos()},methods:{infos:function(){var t=this;y().then((function(e){t.loading=!1,t.info=Object.assign(t.info,e.result),t.info.bigPics&&t.$set(t.info,"bigPicsList",[{url:t.info.bigPics}])})).catch((function(e){t.loading=!1,t.$message.error(e.message)}))},submit:function(){var t=this;this.$confirm("确认提交吗？").then((function(e){t.create()})).catch((function(t){}))},create:function(){var t=this;L(this.info).then((function(e){t.loading=!1,t.$message.success("保存成功！")})).catch((function(e){t.loading=!1,t.$message.error(e.message)}))}}},C=O,k=Object(d["a"])(C,n,o,!1,null,null,null);e["default"]=k.exports},2217:function(t,e,i){"use strict";var n=i("4565"),o=i.n(n);o.a},2409:function(t,e,i){},"293d":function(t,e,i){"use strict";var n=i("2409"),o=i.n(n);o.a},"441e":function(t,e,i){"use strict";var n=i("e579"),o=i.n(n);o.a},4565:function(t,e,i){},e579:function(t,e,i){}}]);