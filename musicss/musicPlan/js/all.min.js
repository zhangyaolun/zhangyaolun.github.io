$(function(){function e(e){keytl=new TimelineMax({paused:!0}),keytl.to(e,.1,{scale:1.1,transformOrigin:"50% 50%",ease:Expo.easeOut}).to(e,.4,{scale:1,transformOrigin:"50% 50%",ease:Elastic.easeOut}),keytl.restart(),keytl.play()}function t(){labels.removeClass("active"),$(rows).each(function(){current=$(this).children().eq(beat),current.addClass("active"),current.find("input").is(":checked")&&(targetDrum=current.parent().attr("data-target-drum"),fn=window[targetDrum],"function"==typeof fn&&fn())}),beat<rowLength-1?++beat:beat=1}function r(){window.clearInterval(intervalId),intervalId=window.setInterval(t,interval)}crashCymbolAll=$("#Crash"),crashCymbol=$("#Crash-Cymbol"),crashAudio=$("#Crash-Audio");var a=new TimelineMax({paused:!0});a.to(crashCymbol,.1,{rotation:8,transformOrigin:"50% 50%"}).to(crashCymbol,1.5,{rotation:0,transformOrigin:"50% 50%",ease:Elastic.easeOut.config(2.5,.3)}),window.crash=function(){a.restart(),a.play();var e=crashAudio.get(0);e.currentTime=0,e.play()};var i=!1;crashCymbolAll.on("touchstart click",function(){if(!i)return i=!0,setTimeout(function(){i=!1},100),crash(),!1}),rightTomDrumAll=$("#Tom-Right-All"),rightTomDrum=$("#Tom-Right-Drum"),smallTomAudio=$("#Small-Rack-Tom-Audio");var o=new TimelineMax({paused:!0});o.to(rightTomDrum,.1,{scaleX:1.04,transformOrigin:"50% 50%",ease:Expo.easeOut}).to(rightTomDrum,.1,{scaleY:.95,transformOrigin:"50% 50%",ease:Expo.easeOut},"0").to(rightTomDrumAll,.1,{rotation:2.5,transformOrigin:"0 50%",ease:Elastic.easeOut},"0").to(rightTomDrum,.4,{scale:1,transformOrigin:"50% 50%",ease:Elastic.easeOut}).to(rightTomDrumAll,.6,{rotation:0,transformOrigin:"0 50%",ease:Elastic.easeOut},"-=0.4"),window.rightTom=function(){o.restart(),o.play();var e=smallTomAudio.get(0);e.currentTime=0,e.play()};var n=!1;rightTomDrumAll.on("touchstart click",function(){if(!n)return n=!0,setTimeout(function(){n=!1},100),rightTom(),!1}),leftTomDrumAll=$("#Tom-Left-All"),leftTomDrum=$("#Tom-Left-Drum"),bigTomAudio=$("#Big-Rack-Tom-Audio");var s=new TimelineMax({paused:!0});s.to(leftTomDrum,.1,{scaleX:1.04,transformOrigin:"50% 50%",ease:Expo.easeOut}).to(leftTomDrum,.1,{scaleY:.95,transformOrigin:"50% 50%",ease:Expo.easeOut},"0").to(leftTomDrumAll,.1,{rotation:-2.5,transformOrigin:"100% 50%",ease:Elastic.easeOut},"0").to(leftTomDrum,.4,{scale:1,transformOrigin:"50% 50%",ease:Elastic.easeOut}).to(leftTomDrumAll,.6,{rotation:0,transformOrigin:"100% 50%",ease:Elastic.easeOut},"-=0.4"),window.leftTom=function(){s.restart(),s.play();var e=bigTomAudio.get(0);e.currentTime=0,e.play()};var l=!1;leftTomDrumAll.on("touchstart click",function(){if(!l)return l=!0,setTimeout(function(){l=!1},100),leftTom(),!1}),floorTomDrumAll=$("#Floor-Tom"),floorTomAudio=$("#Floor-Tom-Audio");var c=new TimelineMax({paused:!0});c.to(floorTomDrumAll,.1,{scaleX:1.02,transformOrigin:"50% 50%",ease:Expo.easeOut}).to(floorTomDrumAll,.1,{scaleY:.95,transformOrigin:"50% 100%",ease:Expo.easeOut},"0").to(floorTomDrumAll,.4,{scale:1,transformOrigin:"50% 100%",ease:Elastic.easeOut}),window.floorTom=function(){c.restart(),c.play();var e=floorTomAudio.get(0);e.currentTime=0,e.play()};var u=!1;floorTomDrumAll.on("touchstart click",function(){if(!u)return u=!0,setTimeout(function(){u=!1},100),floorTom(),!1}),snareDrumAll=$("#Snare"),snareDrum=$("#Snare-Drum"),snareAudio=$("#Snare-Audio");var m=new TimelineMax({paused:!0});m.to(snareDrum,.1,{scaleX:1.04,transformOrigin:"50% 50%",ease:Expo.easeOut}).to(snareDrum,.1,{scaleY:.9,transformOrigin:"50% 100%",ease:Expo.easeOut},"0").to(snareDrum,.4,{scale:1,transformOrigin:"50% 100%",ease:Elastic.easeOut}),window.snare=function(){m.restart(),m.play();var e=snareAudio.get(0);e.currentTime=0,e.play()};var f=!1;snareDrumAll.on("touchstart click",function(){if(!f)return f=!0,setTimeout(function(){f=!1},100),snare(),!1}),kickDrumAll=$("#Kick"),kickAudio=$("#Kick-Audio");var d=new TimelineMax({paused:!0});d.to(kickDrumAll,.1,{scale:1.02,transformOrigin:"50% 100%",ease:Expo.easeOut}).to(kickDrumAll,.4,{scale:1,transformOrigin:"50% 100%",ease:Elastic.easeOut}),window.kick=function(){d.restart(),d.play();var e=kickAudio.get(0);e.currentTime=0,e.play()};var h=!1;kickDrumAll.on("touchstart click",function(){if(!h)return h=!0,setTimeout(function(){h=!1},100),kick(),!1}),hiHatAll=$("#Hi-Hat"),hiHatTop=$("#Hi-Hat-Top"),hiHatBottom=$("#Hi-Hat-Bottom"),hiHatClosedAudio=$("#Hi-Hat-Closed-Audio");var T=new TimelineMax({paused:!0});T.to([hiHatTop,hiHatBottom],.1,{rotation:-4,transformOrigin:"50% 50%"}).to([hiHatTop,hiHatBottom],.6,{rotation:0,transformOrigin:"50% 50%",ease:Elastic.easeOut.config(1.5,.2)}),window.hiHat=function(){T.restart(),T.play();var e=hiHatClosedAudio.get(0);e.currentTime=0,e.play()};var p=!1;hiHatAll.on("touchstart click",function(){if(!p)return p=!0,setTimeout(function(){p=!1},100),hiHat(),!1}),allKeys=$("#All-Keys"),$("#keys-btn").click(function(){allKeys.fadeToggle()}),document.onkeydown=function(t){switch(thisKeyID="Key-"+t.keyCode,thisKey=$("#"+thisKeyID),t.keyCode){case 74:hiHat(),e(thisKey);break;case 72:snare(),e(thisKey);break;case 66:kick(),e(thisKey);break;case 71:floorTom(),e(thisKey);break;case 70:crash(),e(thisKey);break;case 84:leftTom(),e(thisKey);break;case 89:rightTom(),e(thisKey)}},sequencerVisible=!1,$("#sequencer-visible-btn").click(function(){$("#container-sequencer").toggleClass("collapse"),!1===sequencerVisible?sequencerVisible=!0:sequencerVisible=!1,$("#container-drums").toggleClass("screen-sm-hidden")}),rows=$(".row"),rowLength=rows.first().children().length,labels=$("label"),beat=1,sequencerOn=!1,$("#sequencer-active-btn").click(function(){$(this).find("i").toggleClass("fa-pause"),!1===sequencerOn?(intervalId=window.setInterval(t,interval),sequencerOn=!0):(window.clearInterval(intervalId),sequencerOn=!1)}),bpm=150,interval=6e4/bpm,$("#bpm-increase-btn").click(function(){bpm<300&&(bpm=parseInt($("#bpm-indicator").val()),bpm+=10,interval=6e4/bpm,$("#bpm-indicator").val(bpm),!0===sequencerOn&&r())}),$("#bpm-decrease-btn").click(function(){bpm>100&&(bpm=parseInt($("#bpm-indicator").val()),bpm-=10,interval=6e4/bpm,$("#bpm-indicator").val(bpm),!0===sequencerOn&&r())}),$("input").click(function(){!1===sequencerOn&&$(this).is(":checked")&&(targetDrum=$(this).parents(".row").attr("data-target-drum"),fn=window[targetDrum],"function"==typeof fn&&fn())}),$("#sequencer-visible-btn").one("click",function(){$("audio").each(function(e){this.play(),this.pause()})})});