new Vue({el:"#app",data:{preLoading:!0,itemList:[],sellerList:[],listShow:!0,odatas:{curFalg:1},priceFalg:!0,page:1,count:10},filters:{currency:function(t){return t?"¥"+(parseInt(t)/100).toFixed(2):"0.00"}},mounted:function(){FastClick.attach(document.body);var t=this;commentJs.toastLoading("加载中..."),setTimeout(function(){t.oListData()},10),window.addEventListener("scroll",this.handleScroll)},methods:{DownShelfClick:function(t,o){window.location.href="OnShelf"==o?"../product/product_detail.html?goods_id="+t:"./shopLower.html"},oListData:function(){var s=this;o.collectionList(s.odatas.curFalg,s.page,s.count,function(t){1==s.page&&(s.itemList=[]),1==s.odatas.curFalg&&(0==t.result.list.length&&0==s.itemList.length?(s.listShow=!1,$("body").addClass("bgf")):($("body").removeClass("bgf"),t.result.list.forEach(function(i,t){if(i.product){var e=i.disabledInputTitle="";i.product.spuList.forEach(function(t,o){t.spuAttrList.forEach(function(t,o){0==o&&(e+=t.id+",")})}),e="["+e.substring(0,e.length-1)+"]",i.setSkuId="",i.setStock=0,i.product.skuList.forEach(function(t,o){t.skuCombination==e&&(i.setSkuId=t.id,i.setStock=t.stock)}),""!=i.setSkuId&&0==i.setStock&&(i.disabledInputTitle="无货"),"DownShelf"==i.product.status&&(i.disabledInputTitle="已下架"),s.itemList.push(i)}}),s.listShow=!0),0==s.itemList.length&&(s.listShow=!1,$("body").addClass("bgf"))),s.preLoading=!1})},delList:function(s,t){var n=this;n.itemList.forEach(function(t,i){if(t.product.id==s){n.preLoading=!0;var e={collectType:n.odatas.curFalg,collectId:s};o.collectionDelete(e,function(t){n.preLoading=!1,commentJs.toastTitle("已取消收藏",""),n.itemList.splice(i,1),0==n.itemList.length?0:n.itemList.length,commentJs.shopCollNum(),n.oList()})}})},handleScroll:function(){var t=this;$(window).height()+$(document).scrollTop()==$(document).height()&&(t.page++,t.oListData(t.page,t.count))},oList:function(){0==this.itemList.length&&(this.listShow=!1)},footClick:function(t,o){window.location.href="OnShelf"==o?"../product/product_detail.html?goods_id="+t:"./shopLower.html"}}});