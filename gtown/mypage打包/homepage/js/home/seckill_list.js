new Vue({el:"#list",data:{preToast:!1,preLoading:!1,seckill_index:0,SeckillList:[],soonSeckillList:[],Seckillfalg:!0,soonSecfalg:!0,divFalg:!1},computed:{},mounted:function(){var t=this;FastClick.attach(document.body),commentJs.homeHader("限时特惠"),commentJs.toastLoading("加载中..."),window.addEventListener("scroll",this.handleScroll),setTimeout(function(){t.oListData()},100)},filters:{price:function(t){return t?"¥"+(parseInt(t)/100).toFixed(2):"0.00"},originalprice:function(t){return t?"¥"+(parseInt(t)/100).toFixed(2):"0.00"},time:function(t){return t?commentJs.dataFormat(t,1):""}},methods:{product_click:function(t,e){e<=0||(window.location.href="../product/product_detail.html?spikeProductId="+t+"&time="+this.SeckillList.beginTimeStamp+"|"+this.SeckillList.endTimeStamp)},oListData:function(){var l=this;o.spikeactivityList(function(t){if(t.result&&0<t.result.length){var e=t.result,i=(new Date).getTime();e[0].beginTimeStamp<=i?(l.SeckillList=e[0],l.product(l.SeckillList.id),e[1]?(l.soonSeckillList=e[1],l.soonSecfalg=!0):l.soonSecfalg=!1):(l.Seckillfalg=!1,l.soonSeckillList=e[0],l.soonSecfalg=!0)}else l.soonSecfalg=!1,l.Seckillfalg=!1;0==l.SeckillList.length||!l.soonSeckillList.id||l.divFalg?$("body").addClass("bgf"):$("body").removeClass("bgf"),commentJs.fnTimeCountDown(l.SeckillList.endTimeStamp)})},product:function(t,e){if(t){var i=this;o.spikeProductList(t,function(t){t.result&&0<t.result.length?($("body").removeClass("bgf"),1==e?(i.soonSeckillList.rule=[],t.result.forEach(function(t,e){i.soonSeckillList.rule.push(t)})):(i.SeckillList.rule=[],t.result.forEach(function(t,e){t.salesVolume?t.pro_bg=t.activityStock/(t.activityStock+t.salesVolume)*100:t.pro_bg=100,t.sale_count=t.activityStock,i.SeckillList.rule.push(t)}))):$("body").addClass("bgf"),i.preLoading=!1})}},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;document.querySelector("#product_detail_html").offsetTop;this.headerTabShow=!(620<t)},week_change_list:function(t){var e=this;e.seckill_index=t,0==e.SeckillList.length||!e.soonSeckillList.id||e.divFalg?$("body").addClass("bgf"):$("body").removeClass("bgf"),0==t?e.product(e.SeckillList.id,t):e.product(e.soonSeckillList.id,t)}}});